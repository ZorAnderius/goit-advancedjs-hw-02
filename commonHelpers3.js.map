{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', handlerSubmit);\n\nconst toastOption = {\n  icon: '',\n  position: 'topRight',\n  timeout: 5000,\n}\n\n/**submit form and handler of data with show notification about create promises\n * \n * @param {SubmitEvent} e \n * @returns undefined\n */\nfunction handlerSubmit(e) {\n  e.preventDefault();\n  const [delay, steps, amount ] = [...e.target.elements].map(({value}) => !value.match('e') ? +value : NaN);\n  \n  if (isNaN(delay) || isNaN(steps) || isNaN(amount)) {\n    iziToast.error({\n      ...toastOption,\n      message: 'Invalid data'\n    })\n    form.reset();\n    return;\n  }\n\n  for (let i = 0; i < amount; i += 1){\n    const totalDelay = delay + steps * i;\n    showPromises(i + 1, totalDelay);\n  }\n  form.reset();\n}\n\n/**show notifications about created promises\n * \n * @param {number} position \n * @param {number} delay \n */\nfunction showPromises(position, delay) {\n    createPromise(position, delay)\n      .then(({position, delay}) => {\n        iziToast.success({\n          ...toastOption,\n          message: `Fulfilled promise ${position} in ${delay}ms`,\n          title: '✅'\n        });\n      }).catch(({position, delay})  => {\n        iziToast.error({\n          ...toastOption,\n          message: `Rejected promise ${position} in ${delay}ms`,\n          title: '❌'\n        })\n      });\n}\n\n/**create one promises with random status\n * \n * @param {number} position \n * @param {number} delay \n * @returns {Promises}\n */\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const shouldResolve = Math.random() > 0.3;\n        if (shouldResolve) {\n          resolve({ position, delay });\n        } else {\n          reject({position, delay});\n        }\n      }, delay);\n    });\n}\n"],"names":["form","handlerSubmit","toastOption","e","delay","steps","amount","value","iziToast","i","totalDelay","showPromises","position","createPromise","resolve","reject"],"mappings":"wIAGA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAE3CA,EAAK,iBAAiB,SAAUC,CAAa,EAE7C,MAAMC,EAAc,CAClB,KAAM,GACN,SAAU,WACV,QAAS,GACX,EAOA,SAASD,EAAcE,EAAG,CACxBA,EAAE,eAAc,EAChB,KAAM,CAACC,EAAOC,EAAOC,CAAM,EAAK,CAAC,GAAGH,EAAE,OAAO,QAAQ,EAAE,IAAI,CAAC,CAAC,MAAAI,CAAK,IAAOA,EAAM,MAAM,GAAG,EAAa,IAAT,CAACA,CAAW,EAExG,GAAI,MAAMH,CAAK,GAAK,MAAMC,CAAK,GAAK,MAAMC,CAAM,EAAG,CACjDE,EAAS,MAAM,CACb,GAAGN,EACH,QAAS,cACf,CAAK,EACDF,EAAK,MAAK,EACV,MACD,CAED,QAASS,EAAI,EAAGA,EAAIH,EAAQG,GAAK,EAAE,CACjC,MAAMC,EAAaN,EAAQC,EAAQI,EACnCE,EAAaF,EAAI,EAAGC,CAAU,CAC/B,CACDV,EAAK,MAAK,CACZ,CAOA,SAASW,EAAaC,EAAUR,EAAO,CACnCS,EAAcD,EAAUR,CAAK,EAC1B,KAAK,CAAC,CAAC,SAAAQ,EAAU,MAAAR,CAAK,IAAM,CAC3BI,EAAS,QAAQ,CACf,GAAGN,EACH,QAAS,qBAAqBU,CAAQ,OAAOR,CAAK,KAClD,MAAO,GACjB,CAAS,CACF,CAAA,EAAE,MAAM,CAAC,CAAC,SAAAQ,EAAU,MAAAR,CAAK,IAAO,CAC/BI,EAAS,MAAM,CACb,GAAGN,EACH,QAAS,oBAAoBU,CAAQ,OAAOR,CAAK,KACjD,MAAO,GACjB,CAAS,CACT,CAAO,CACP,CAQA,SAASS,EAAcD,EAAUR,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACU,EAASC,IAAW,CACpC,WAAW,IAAM,CACO,KAAK,OAAM,EAAK,GAEpCD,EAAQ,CAAE,SAAAF,EAAU,MAAAR,CAAK,CAAE,EAE3BW,EAAO,CAAC,SAAAH,EAAU,MAAAR,CAAK,CAAC,CAE3B,EAAEA,CAAK,CACd,CAAK,CACL"}