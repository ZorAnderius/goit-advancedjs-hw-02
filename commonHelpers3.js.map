{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.querySelector('.form');\n\nform.addEventListener('submit', handlerSubmit);\n\nconst toastOption = {\n  icon: '',\n  position: 'topRight',\n  timeout: 5000\n}\n\n/**submit form and handler of data with show notification about create promises\n * \n * @param {SubmitEvent} e \n * @returns undefined\n */\nfunction handlerSubmit(e) {\n  e.preventDefault();\n  const [delay, steps, amount ] = [...e.target.elements].map(({value}) => !value.match('e') ? Number(value) : NaN);\n  \n  if (isNaN(delay) || isNaN(steps) || isNaN(amount)) {\n    iziToast.error({\n      ...toastOption,\n      message: 'Invalid data'\n    })\n    form.reset();\n    return;\n  }\n\n  for (let i = 1; i <= amount; i += 1){\n    const totalDelay = delay + steps * i;\n    showPromises(i, totalDelay);\n  }\n  form.reset();\n}\n\n/**show notifications about created promises\n * \n * @param {number} position \n * @param {number} delay \n */\nfunction showPromises(position, delay) {\n    createPromise(position, delay)\n      .then(res => {\n        iziToast.success({\n          ...toastOption,\n          message: res,\n          title: '✅'\n        });\n      }).catch(rej => {\n        iziToast.error({\n          ...toastOption,\n          message: rej,\n          title: '❌'\n        })\n      });\n}\n\n/**create one promises with random status\n * \n * @param {number} position \n * @param {number} delay \n * @returns {Promises}\n */\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        const shouldResolve = Math.random() > 0.3;\n        if (shouldResolve) {\n          resolve(`Fulfilled promise ${position} in ${delay}ms`);\n        } else {\n          reject(`Rejected promise ${position} in ${delay}ms`);\n        }\n      }, delay);\n    });\n}\n"],"names":["form","handlerSubmit","toastOption","e","delay","steps","amount","value","iziToast","i","totalDelay","showPromises","position","createPromise","res","rej","resolve","reject"],"mappings":"wIAGA,MAAMA,EAAO,SAAS,cAAc,OAAO,EAE3CA,EAAK,iBAAiB,SAAUC,CAAa,EAE7C,MAAMC,EAAc,CAClB,KAAM,GACN,SAAU,WACV,QAAS,GACX,EAOA,SAASD,EAAcE,EAAG,CACxBA,EAAE,eAAc,EAChB,KAAM,CAACC,EAAOC,EAAOC,CAAQ,EAAG,CAAC,GAAGH,EAAE,OAAO,QAAQ,EAAE,IAAI,CAAC,CAAC,MAAAI,CAAK,IAAOA,EAAM,MAAM,GAAG,EAAoB,IAAhB,OAAOA,CAAK,CAAO,EAE/G,GAAI,MAAMH,CAAK,GAAK,MAAMC,CAAK,GAAK,MAAMC,CAAM,EAAG,CACjDE,EAAS,MAAM,CACb,GAAGN,EACH,QAAS,cACf,CAAK,EACDF,EAAK,MAAK,EACV,MACD,CAED,QAASS,EAAI,EAAGA,GAAKH,EAAQG,GAAK,EAAE,CAClC,MAAMC,EAAaN,EAAQC,EAAQI,EACnCE,EAAaF,EAAGC,CAAU,CAC3B,CACDV,EAAK,MAAK,CACZ,CAOA,SAASW,EAAaC,EAAUR,EAAO,CACnCS,EAAcD,EAAUR,CAAK,EAC1B,KAAKU,GAAO,CACXN,EAAS,QAAQ,CACf,GAAGN,EACH,QAASY,EACT,MAAO,GACjB,CAAS,CACT,CAAO,EAAE,MAAMC,GAAO,CACdP,EAAS,MAAM,CACb,GAAGN,EACH,QAASa,EACT,MAAO,GACjB,CAAS,CACT,CAAO,CACP,CAQA,SAASF,EAAcD,EAAUR,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACY,EAASC,IAAW,CACpC,WAAW,IAAM,CACO,KAAK,OAAM,EAAK,GAEpCD,EAAQ,qBAAqBJ,CAAQ,OAAOR,CAAK,IAAI,EAErDa,EAAO,oBAAoBL,CAAQ,OAAOR,CAAK,IAAI,CAEtD,EAAEA,CAAK,CACd,CAAK,CACL"}